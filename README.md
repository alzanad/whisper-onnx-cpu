# ๐ค Whisper ONNX CPU

> ูุดุฑูุน Whisper ูุญููู ุฅูู ุตูุบุฉ ONNX ููุชุดุบูู ุงูุณุฑูุน ูุงููุนูุงู ุนูู ุงููุนุงูุฌุงุช ุงููุญููุฉ ุจุฏูู ุงูุญุงุฌุฉ ููุฑูุช ุงูุฑุณููุงุช

## ๐ ุญูู ุงููุดุฑูุน

ูุฐุง ุงููุดุฑูุน ูุจูู ุนูู ุงูุนูู ุงูููุชุงุฒ ูู ุงููุดุฑูุน ุงูุฃุตูู:
**[whisper-onnx-cpu](https://github.com/PINTO0309/whisper-onnx-cpu)**

**ูุงุฌูุช ูุดุงูู ูุซูุฑุฉ ูู ุงููุดุฑูุน ุงูุฃุตูู ููุงู ูุนูุฏ ูุฐูู ููุช ุจุชุจุณูุทู**

## โ๏ธ ููุงุญุธุงุช ูููุฉ ุญูู ุงูููุงุฐุฌ ูุงูุนุฑุจูุฉ

**ุงูููุงุฐุฌ ุงูุนุงูุฉ ุชุนุทู ูุชุงุฆุฌ ุถุนููุฉ ุฌุฏุงู ูุน ุงููุบุฉ ุงูุนุฑุจูุฉ**. ุงูุณุจุจ ุฃู ูุฐู ุงูููุงุฐุฌ ูุฏุฑุจุฉ ุจุดูู ุนุงู ุนูู ุนุฏุฉ ูุบุงุช ููุง ุชุฑูุฒ ุนูู ูุบุฉ ูุงุญุฏุฉ ุจุนูููุงุ ููุง ูุฌุนู ุฃุฏุงุคูุง ุถุนููุงู ูุน ุงููุบุงุช ุงูุชู ุชุชุทูุจ ูููุงู ุฎุงุตุงู ูุซู ุงูุนุฑุจูุฉ.

ุชู ุงุฎุชุจุงุฑ ุงูููุงุฐุฌ ุงูุชุงููุฉ ูุน ุงููุชุงุฆุฌ:
- `tiny`: ูุชุงุฆุฌ ุณูุฆุฉ ููุบุงูุฉ ูุน ุงูุนุฑุจูุฉ
- `base`: ูุชุงุฆุฌ ุณูุฆุฉ ููุบุงูุฉ ูุน ุงูุนุฑุจูุฉ  
- `small`: ูุชุงุฆุฌ ุณูุฆุฉ ููุบุงูุฉ ูุน ุงูุนุฑุจูุฉ
**ูู ูุฎุชุจุฑ ุงูุจุงูู ูุนูููุง ุจุณูุก ุงููุชูุฌุฉ**

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

- **ุฃุฏุงุก ูุญุณูู**: ุชุดุบูู ุณุฑูุน ุนูู ุงููุนุงูุฌุงุช ุจูุถู ุชุญุณููุงุช ONNX
- **ูุงุฌูุฉ ุณุทุฑ ุฃูุงูุฑ ูููุฉ**: ุชุญูู ูุงูู ูู ุนูููุฉ ุงูุชุญููู ูุน ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต
- **ุฅุฏุงุฑุฉ ุฐููุฉ ูููููุงุช**: ุจุญุซ ุชููุงุฆู ูู ุงููุฌูุฏุงุช ุงููุฎุตุตุฉ ูุน ุฏุนู ุงูุชุฏุงุฏุงุช ูุชุนุฏุฏุฉ
- **ุตูุบ ุฅุฎุฑุงุฌ ูุชุนุฏุฏุฉ**: ุญูุธ ุจุตูุบ TXTุ VTTุ SRT
- **ุฅุนุฏุงุฏุงุช ูุฑูุฉ**: ููู config.json ูุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูููุถูุฉ

## ุงูุจุฏุก ุงูุณุฑูุน

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

**ูุทููุจ Python 3.10 ุฃู ุฃุญุฏุซ ููุญุตูู ุนูู ุฃูุถู ุฃุฏุงุก ูุชูุงูู.**

### ุฅุนุฏุงุฏ ุงูุจูุฆุฉ

**ููุตุญ ุจุดุฏุฉ ุจุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ:**
```bash
python3.10 -m venv venv
source venv/bin/activate  # ุนูู Linux/Mac
# ุฃู
venv\Scripts\activate     # ุนูู Windows
```

**ุฅุฐุง ูู ุชุฑุบุจ ูู ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉุ ุงุณุชุฎุฏู ูุฐุง ุงูุฃูุฑ:**
```bash
pip install --upgrade --pre transformers
```

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
pip install -r requirements.txt
```

### 2. ุชูุฒูู ุงูููุงุฐุฌ

```bash
cd download_models
python download_models.py --model tiny.en
```

### 3. ุชุดุบูู ุงูุชุญููู

```bash
cd whisper
python transcribe.py -m tiny.en -l en -a audio_file.mp3
```

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู ุงูููุตู

### ๐ฏ ุงุณุชุฎุฏุงู ููู transcribe.py

```bash
# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ whisper
cd whisper

# ุชุดุบูู ุจุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ (ูู config.json)
python transcribe.py

# ุชุญุฏูุฏ ุงููุนุงููุงุช ูุฏููุงู
python transcribe.py -m tiny.en -l en -a ../audio.mp3

# ุงุณุชุฎุฏุงู ูุณุงุฑ ูุงูู ูููููุฐุฌ
python transcribe.py -m ../whisper-models/tiny.en -l en -a ../audio.mp3

# ุชุญุฏูุฏ ูุฌูุฏ ุงูุฅุฎุฑุงุฌ ูุตูุบ ูุชุนุฏุฏุฉ
python transcribe.py -m tiny.en -l en -a ../audio.mp3 -o ../output --formats txt vtt srt

# ุนุฑุถ ุงูููุงุฐุฌ ุงููุฏุนููุฉ
python transcribe.py --list-models

# ุชุดุบูู ูุน ุชูุงุตูู ุฃูุซุฑ
python transcribe.py -m tiny.en -l en -a ../audio.mp3 -v
```

### ๐ ุงููุนุงููุงุช ุงููุชุงุญุฉ

- `-m, --model`: ุงุณู ุงููููุฐุฌ ุฃู ูุณุงุฑู ุงููุงูู
- `-l, --language`: ุฑูุฒ ุงููุบุฉ (en, ar, ูุบูุฑูุง)  
- `-a, --audio`: ูุณุงุฑ ุงูููู ุงูุตูุชู
- `-o, --output`: ูุฌูุฏ ุงูุฅุฎุฑุงุฌ (ุงูุชุฑุงุถู: output)
- `--formats`: ุตูุบ ุงูุฅุฎุฑุงุฌ (txt, vtt, srt)
- `--config`: ูุณุงุฑ ููู ุฅุนุฏุงุฏุงุช ูุฎุตุต
- `--list-models`: ุนุฑุถ ุงูููุงุฐุฌ ุงููุฏุนููุฉ
- `-v, --verbose`: ุนุฑุถ ุชูุงุตูู ุฃูุซุฑ

### โ๏ธ ููู ุงูุฅุนุฏุงุฏุงุช (config.json)

ูููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ูู ููู `config.json`:

```json
{
    "default_model": "tiny.en",
    "default_language": "en", 
    "default_audio": "audio.mp3",
    "models_directory": "whisper-models",
    "output_directory": "output",
    "output_formats": ["txt", "vtt", "srt"]
}
```
 ุฅุฐุง ูุถุนุช ุง๏ปนุนุฏุงุฏุงุช ุง๏ปนูุชุฑุงุถูุฉ ูุชุณุชุทูุน ุชุดุบูู ุงููุธุงู ุจ:
 
 ```bash
python transcribe.py
 ```

### ๐ฝ ุชูุฒูู ุงูููุงุฐุฌ

ุงูููุงุฐุฌ ูููุตูุฉ ุนู ุงููุดุฑูุน ุงูุฃุณุงุณู. ูุชูุฒูู ุงูููุงุฐุฌ:

```bash
# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุฃุฏูุงุช ุงูุชูุฒูู
cd download_models

# ุนุฑุถ ุงูููุงุฐุฌ ุงููุชุงุญุฉ
python download_models.py --list

# ุชูุฒูู ูููุฐุฌ ูุญุฏุฏ
python download_models.py --model tiny.en

# ุชูุฒูู ุฌููุน ุงูููุงุฐุฌ
python download_models.py --all
```

ุงูููุงุฐุฌ ุณุชูุญูุธ ูู ูุฌูุฏ `whisper-models` ูุณูุฌุฏูุง ุงูุจุฑูุงูุฌ ุชููุงุฆูุงู.

## ๐๏ธ ูููู ุงููุดุฑูุน

```
whisper-onnx-cpu/
โโโ ๐ README.md                    # ูุฐุง ุงูููู - ุฏููู ุดุงูู ูููุดุฑูุน
โโโ ๐ api.py                       # ูุงุฌูุฉ ุจุฑูุฌูุฉ ูุฑูุฉ ููุฏูุฌ ูุน ุงููุดุงุฑูุน
โโโ โ๏ธ config.json                 # ููู ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
โโโ ๐ requirements.txt            # ูุชุทูุจุงุช Python
โโโ ๐ต whisper/                    # ุงูููุชุจุฉ ุงูุฃุณุงุณูุฉ
โ   โโโ ๐ transcribe.py          # ููู ุงูุชุดุบูู ุงูุฑุฆูุณู
โ   โโโ โ๏ธ config.json           # ุฅุนุฏุงุฏุงุช whisper
โ   โโโ ๐๏ธ audio.py              # ูุนุงูุฌุฉ ุงูุตูุช
โ   โโโ ๐ง model.py               # ุฅุฏุงุฑุฉ ุงูููุงุฐุฌ
โ   โโโ ๐ค tokenizer.py           # ูุนุงูุฌุฉ ุงููุตูุต
โ   โโโ ๐ decoding.py            # ูู ุงูุชุดููุฑ
โ   โโโ ๐ assets/                # ูููุงุช ุงููุธุงู
โโโ ๐ค whisper-models/            # ูุฌูุฏ ุงูููุงุฐุฌ
โ   โโโ tiny.en_encoder_11.onnx
โ   โโโ tiny.en_decoder_11.onnx
โ   โโโ ...
โโโ ๐ต audio/                     # ุงููููุงุช ุงูุตูุชูุฉ
โโโ ๐ output/                    # ูููุงุช ุงูุฅุฎุฑุงุฌ
โโโ ๐ฅ download_models/           # ุฃุฏูุงุช ุชูุฒูู ุงูููุงุฐุฌ
    โโโ download_models.py
    โโโ models_config.json
```

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู ุงููุชูุฏูุฉ

### ุชุญููู ุณุฑูุน ุจุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
```bash
cd whisper
python transcribe.py
```

### ุชุญุฏูุฏ ุงููููุฐุฌ ูุงููุบุฉ ูุงูููู
```bash
python transcribe.py -m small -l ar -a arabic_speech.mp3
```

### ุญูุธ ุจุตูุบ ูุชุนุฏุฏุฉ ูุน ุชูุงุตูู ุฃูุซุฑ
```bash
python transcribe.py -m base.en -l en -a interview.wav \
  --formats txt vtt srt -v
```

### ุงุณุชุฎุฏุงู ูุณุงุฑ ูุงูู ูููููุฐุฌ
```bash
python transcribe.py -m ../whisper-models/medium -l ar \
  -a ../audio/lecture.m4a -o ../output
```

### ูุซุงู ุดุงูู ูุชูุฏู
```bash
cd whisper
python transcribe.py \
  -m ../whisper-models/tiny.en \
  -l en \
  -a ../audio.mp3 \
  -o ../output \
  --formats txt vtt srt \
  -v
```

### ุงุณุชุฎุฏุงู ููู ุฅุนุฏุงุฏุงุช ูุฎุตุต  
```bash
python transcribe.py --config ../my_config.json
```

## ๏ฟฝ ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ (API) - ููู api.py

ูุชุถูู ุงููุดุฑูุน **ูุงุฌูุฉ ุจุฑูุฌูุฉ ูุฑูุฉ ููููุฉ** ูู ููู `api.py` ุชุณูุญ ุจุฏูุฌ ูุฏุฑุงุช Whisper ูู ูุดุงุฑูุนู ุงูุจุฑูุฌูุฉ ุจุณูููุฉ.

### ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู ุงูุจุฑูุฌู

#### ุงูุงุณุชุฎุฏุงู ุงูุฃุณุงุณู
```python
from api import WhisperAPI

# ุฅูุดุงุก ูุงุฌูุฉ ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
whisper = WhisperAPI()

# ูุณุฎ ููู ุตูุชู
result = whisper.transcribe("audio/my_audio.mp3")

if result.success:
    print(f"ุงููุต: {result.text}")
    print(f"ุงููุบุฉ: {result.language}")
else:
    print(f"ุฎุทุฃ: {result.error_message}")
```

#### ุงุณุชุฎุฏุงู ูุชูุฏู ูุน ุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช
```python
# ุชุฎุตูุต ุงููุฌูุฏุงุช ูุงูุฅุนุฏุงุฏุงุช
whisper = WhisperAPI(
    models_dir="my_models",
    audio_dir="my_audio",
    output_dir="my_output"
)

# ูุณุฎ ูุน ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ
result = whisper.transcribe(
    audio_file="interview.wav",
    model="base.en",
    language="en",
    output_formats=["txt", "srt", "vtt"],
    verbose=True
)

# ุงููุตูู ูููููุงุช ุงููุญููุธุฉ
if result.success:
    print(f"ุงููููุงุช ุงููุญููุธุฉ: {result.output_files}")
```

#### ูุณุฎ ุนุฏุฉ ูููุงุช ุฏูุนุฉ ูุงุญุฏุฉ
```python
# ูุงุฆูุฉ ุงููููุงุช ุงูุตูุชูุฉ
audio_files = ["file1.mp3", "file2.wav", "file3.m4a"]

# ูุณุฎ ุฌููุน ุงููููุงุช
results = whisper.transcribe_batch(
    audio_files,
    model="tiny.en",
    language="en",
    output_formats=["txt"]
)

# ูุนุงูุฌุฉ ุงููุชุงุฆุฌ
for i, result in enumerate(results):
    if result.success:
        print(f"ููู {i+1}: ุชู ุงููุณุฎ ุจูุฌุงุญ")
        print(f"ุงููุต: {result.text[:100]}...")
    else:
        print(f"ููู {i+1}: ูุดู - {result.error_message}")
```

#### ุฏูุงู ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน
```python
from api import quick_transcribe, transcribe_to_file

# ูุณุฎ ุณุฑูุน - ูุฑุฌุน ุงููุต ูุจุงุดุฑุฉ
text = quick_transcribe("audio.mp3", model="tiny.en", language="en")
print(text)

# ูุณุฎ ูุญูุธ ูู ููู
success = transcribe_to_file(
    audio_file="audio.mp3",
    output_file="output.txt",
    model="base.en",
    language="en"
)
```

### ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูููุชุฑุญุฉ

- **ุชุทุจููุงุช ุงูููุจ**: ุฏูุฌ ุงููุณุฎ ุงูุตูุชู ูู ุชุทุจููุงุช Flask/Django
- **ุฃุชูุชุฉ ุงููุนุงูุฌุฉ**: ูุณุฎ ูููุงุช ุตูุชูุฉ ูุชุนุฏุฏุฉ ุชููุงุฆูุงู
- **ุชุทุจููุงุช ุณุทุญ ุงูููุชุจ**: ุฅุถุงูุฉ ููุฒุฉ ุงููุณุฎ ููุชุทุจููุงุช ุงููุญููุฉ
- **ูุนุงูุฌุฉ ุงูุจูุงูุงุช**: ุชุญููู ููุชุจุงุช ุตูุชูุฉ ูุงููุฉ ุฅูู ูุตูุต
- **ุงูุชูุงูู ูุน ุฎุฏูุงุช ุฃุฎุฑู**: ุฑุจุท ุงููุณุฎ ูุน ููุงุนุฏ ุงูุจูุงูุงุช ุฃู APIs

## ๏ฟฝ๐ง ุงููุชุทูุจุงุช ุงูุชูููุฉ

- **Python**: 3.10 ุฃู ุฃุญุฏุซ (ููุตู ุจู ุจุดุฏุฉ)
- **ุฐุงูุฑุฉ**: 4GB RAM (ููุตู ุจู 8GB ููููุงุฐุฌ ุงููุจูุฑุฉ)
- **ุชุฎุฒูู**: 100MB - 1GB ุญุณุจ ุงููููุฐุฌ ุงููุณุชุฎุฏู
- **ูุนุงูุฌ**: ุฃู ูุนุงูุฌ ุญุฏูุซ (ูุง ูุชุทูุจ GPU)

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุฑุฎุตุฉ MIT - ุฑุงุฌุน ููู [LICENSE](LICENSE) ููุชูุงุตูู.

---

<div align="center">

**ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณ ุฅุนุทุงุคู โญ**

[๐ ุงููุดุงูู](../../issues) | [๐ฌ ุงูููุงูุดุงุช](../../discussions)

</div>
